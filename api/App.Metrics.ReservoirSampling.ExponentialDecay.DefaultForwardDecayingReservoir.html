<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Class DefaultForwardDecayingReservoir
   </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Class DefaultForwardDecayingReservoir
   ">
    <meta name="generator" content="docfx 2.16.2.2">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link href="https://fonts.googleapis.com/css?family=Roboto:300" rel="stylesheet">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <link rel="nuget" type="application/rsd+xml" href="https://www.myget.org/Discovery/Feed/alhardy/">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
  </head>
  <body data-spy="scroll" data-target="#affix">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.png" alt="">
              </a><span class="app-name">App Metrics</span>   
                 <a href="https://github.com/alhardy/AppMetrics" target="_blank"><img style="position: absolute; top: 0; right: 0; border: 0;z-index:1000;" src="https://camo.githubusercontent.com/38ef81f8aca64bb9a64448d0d70f1308ef5341ab/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f6461726b626c75655f3132313632312e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"></a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content">
              
              
              <h1 id="" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir">Class DefaultForwardDecayingReservoir
              </h1>
              <div class="markdown level0 summary"><p>A histogram with an exponentially decaying reservoir produces
<a href="https://en.wikipedia.org/wiki/Quantile">quantiles</a> which are representative of (roughly) the last
five minutes of data.
<p>
    The reservoir is produced by using a
<a href="http://dimacs.rutgers.edu/~graham/pubs/papers/fwddecay.pdf">forward-decaying reservoir</a> with an
exponential weighty towards recent data unlike a Uniform Reservoir which does not provide a sense of recency.
</p>
<p>
    This sampling reservoir can be used when you are interested in recent changes to the distribution of data rather
    than a median on the lifetime of the histgram.
</p></p>
</div>
              <div class="markdown level0 conceptual"></div>
              <div class="inheritance">
                <h5>Inheritance</h5>
                  <div class="level0"><span class="xref">System.Object</span></div>
                  <div class="level1"><span class="xref">DefaultForwardDecayingReservoir</span></div>
              </div>
              <h6><strong>Namespace</strong>:App.Metrics.ReservoirSampling.ExponentialDecay</h6>
              <h6><strong>Assembly</strong>:cs.temp.dll.dll</h6>
              <h5 id="_syntax">Syntax</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public sealed class DefaultForwardDecayingReservoir : IReservoir, IDisposable</code></pre>
              </div>
              <h3 id="constructors">Constructors
              </h3>
              
              
              <a id="constructors" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.#ctor*"></a>
              <h4 id="constructors" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.#ctor">DefaultForwardDecayingReservoir()</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.html">DefaultForwardDecayingReservoir</a> class.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public DefaultForwardDecayingReservoir()</code></pre>
              </div>
              <h5 id="constructors_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The default size and alpha values offer a 99.9% confidence level with a 5% margin of error assuming a normal
distribution and heavily biases the reservoir to the past 5 minutes of measurements.</p>
</div>
              
              
              <a id="constructors" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.#ctor*"></a>
              <h4 id="constructors" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.#ctor(System.Int32,System.Double)">DefaultForwardDecayingReservoir(Int32, Double)</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.html">DefaultForwardDecayingReservoir</a> class.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public DefaultForwardDecayingReservoir(int sampleSize, double alpha)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table>
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="xref">System.Int32</span></td>
                    <td><em>sampleSize</em></td>
                    <td><p>The number of samples to keep in the sampling reservoir.</p>
</td>
                  </tr>
                  <tr>
                    <td><span class="xref">System.Double</span></td>
                    <td><em>alpha</em></td>
                    <td><p>The alpha value, e.g 0.015 will heavily biases the reservoir to the past 5 mins of measurements. The higher the
value the more biased the reservoir will be towards newer values.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h5 id="constructors_remarks">Remarks</h5>
              <div class="markdown level1 remarks"><p>The default size and alpha values offer a 99.9% confidence level with a 5% margin of error assuming a normal
distribution and heavily biases the reservoir to the past 5 minutes of measurements.</p>
</div>
              
              
              <a id="constructors" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.#ctor*"></a>
              <h4 id="constructors" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.#ctor(System.Int32,System.Double,App.Metrics.IClock,IScheduler)">DefaultForwardDecayingReservoir(Int32, Double, IClock, IScheduler)</h4>
              <div class="markdown level1 summary"><p>Initializes a new instance of the <a class="xref" href="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.html">DefaultForwardDecayingReservoir</a> class.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public DefaultForwardDecayingReservoir(int sampleSize, double alpha, IClock clock, IScheduler scheduler = null)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table>
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="xref">System.Int32</span></td>
                    <td><em>sampleSize</em></td>
                    <td><p>The number of samples to keep in the sampling reservoir</p>
</td>
                  </tr>
                  <tr>
                    <td><span class="xref">System.Double</span></td>
                    <td><em>alpha</em></td>
                    <td><p>The alpha value, e.g 0.015 will heavily biases the reservoir to the past 5 mins of measurements. The higher the
value the more biased the reservoir will be towards newer values.</p>
</td>
                  </tr>
                  <tr>
                    <td><a class="xref" href="App.Metrics.IClock.html">IClock</a></td>
                    <td><em>clock</em></td>
                    <td><p>The <a class="xref" href="App.Metrics.IClock.html">IClock</a> type to use for calculating processing time.</p>
</td>
                  </tr>
                  <tr>
                    <td><span class="xref">IScheduler</span></td>
                    <td><em>scheduler</em></td>
                    <td><p>asdfasf</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h3 id="properties">Properties
              </h3>
              
              
              <a id="properties" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Size*"></a>
              <h4 id="properties" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Size">Size</h4>
              <div class="markdown level1 summary"><p>Gets the size.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public int Size { get; }</code></pre>
              </div>
              <h5 class="propertyValue">Property Value</h5>
              <table>
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="xref">System.Int32</span></td>
                    <td><p>The size.</p>
</td>
                  </tr>
                </tbody>
              </table>
              <h3 id="methods">Methods
              </h3>
              
              
              <a id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Dispose*"></a>
              <h4 id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Dispose">Dispose()</h4>
              <div class="markdown level1 summary"><p>Performs application-defined tasks associated with freeing, releasing, or resetting unmanaged resources.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public void Dispose()</code></pre>
              </div>
              <h5 class="implements">Implements</h5>
                  <div><span class="xref">System.IDisposable.Dispose()</span></div>
              
              
              <a id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Dispose*"></a>
              <h4 id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Dispose(System.Boolean)">Dispose(Boolean)</h4>
              <div class="markdown level1 summary"><p>Releases unmanaged and - optionally - managed resources.</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public void Dispose(bool disposing)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table>
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="xref">System.Boolean</span></td>
                    <td><em>disposing</em></td>
                    <td><p><code>true</code> to release both managed and unmanaged resources; <code>false</code> to release only
unmanaged resources.</p>
</td>
                  </tr>
                </tbody>
              </table>
              
              
              <a id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.GetSnapshot*"></a>
              <h4 id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.GetSnapshot">GetSnapshot()</h4>
              <div class="markdown level1 summary"></div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public IReservoirSnapshot GetSnapshot()</code></pre>
              </div>
              <h5 class="returns">Returns</h5>
              <table>
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="xref">IReservoirSnapshot</span></td>
                    <td></td>
                  </tr>
                </tbody>
              </table>
              
              
              <a id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.GetSnapshot*"></a>
              <h4 id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.GetSnapshot(System.Boolean)">GetSnapshot(Boolean)</h4>
              <div class="markdown level1 summary"></div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public IReservoirSnapshot GetSnapshot(bool resetReservoir)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table>
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="xref">System.Boolean</span></td>
                    <td><em>resetReservoir</em></td>
                    <td></td>
                  </tr>
                </tbody>
              </table>
              <h5 class="returns">Returns</h5>
              <table>
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="xref">IReservoirSnapshot</span></td>
                    <td></td>
                  </tr>
                </tbody>
              </table>
              
              
              <a id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Rescale*"></a>
              <h4 id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Rescale">Rescale()</h4>
              <div class="markdown level1 summary"><p>A common feature of the above techniques—indeed, the key technique that
allows us to track the decayed weights efficiently—is that they maintain
counts and other quantities based on g(ti − L), and only scale by g(t − L)
at query time. But while g(ti −L)/g(t−L) is guaranteed to lie between zero
and one, the intermediate values of g(ti − L) could become very large. For
polynomial functions, these values should not grow too large, and should be
effectively represented in practice by floating point values without loss of
precision. For exponential functions, these values could grow quite large as
new values of (ti − L) become large, and potentially exceed the capacity of
common floating point types. However, since the values stored by the
algorithms are linear combinations of g values (scaled sums), they can be
rescaled relative to a new landmark. That is, by the analysis of exponential
decay in Section III-A, the choice of L does not affect the final result. We
can therefore multiply each value based on L by a factor of exp(−α(L′ − L)),
and obtain the correct value as if we had instead computed relative to a new
landmark L′ (and then use this new L′ at query time). This can be done with
a linear pass over whatever data structure is being used.&quot;</p>
</div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public void Rescale()</code></pre>
              </div>
              
              
              <a id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Reset*"></a>
              <h4 id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Reset">Reset()</h4>
              <div class="markdown level1 summary"></div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public void Reset()</code></pre>
              </div>
              
              
              <a id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Update*"></a>
              <h4 id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Update(System.Int64)">Update(Int64)</h4>
              <div class="markdown level1 summary"></div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public void Update(long value)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table>
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="xref">System.Int64</span></td>
                    <td><em>value</em></td>
                    <td></td>
                  </tr>
                </tbody>
              </table>
              
              
              <a id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Update*"></a>
              <h4 id="methods" data-uid="App.Metrics.ReservoirSampling.ExponentialDecay.DefaultForwardDecayingReservoir.Update(System.Int64,System.String)">Update(Int64, String)</h4>
              <div class="markdown level1 summary"></div>
              <div class="markdown level1 conceptual"></div>
              <h5 class="decalaration">Declaration</h5>
              <div class="codewrapper">
                <pre><code class="lang-csharp hljs">public void Update(long value, string userValue)</code></pre>
              </div>
              <h5 class="parameters">Parameters</h5>
              <table>
                <thead>
                  <tr>
                    <th>Type</th>
                    <th>Name</th>
                    <th>Description</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><span class="xref">System.Int64</span></td>
                    <td><em>value</em></td>
                    <td></td>
                  </tr>
                  <tr>
                    <td><span class="xref">System.String</span></td>
                    <td><em>userValue</em></td>
                    <td></td>
                  </tr>
                </tbody>
              </table>
            </article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top"><strong>Back to top</strong></a>
            </span>
            
            <span>Copyright © 2017 Allan Hardy<br>Generated by <a alt="docfx" target="_blank" href="https://dotnet.github.io/docfx/"><strong>DocFX</strong></a></span>
          </div>
        </div>   
      </footer>
      
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
    
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
      ga('create', 'UA-98322721-1', 'auto');
      ga('send', 'pageview');
    
    </script>  </body>
</html>
